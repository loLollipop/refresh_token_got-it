<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OpenAI Refresh Token 提取工具</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <main class="container">
      <h1>OpenAI Refresh Token 提取工具</h1>
      <p class="hint">
        点击按钮后会直接弹出授权链接（无需填写任何信息）。<br />
        把链接发给对方打开授权，再把完整回调 URL 粘贴回来，即可提取 refresh token。
      </p>

      <section class="card">
        <h2>1) 生成并弹出授权链接</h2>
        <div class="row one">
          <button id="authorizeBtn">获取授权链接</button>
        </div>
        <label>
          授权链接（已固定 client_id / redirect_uri）
          <textarea id="authUrl" readonly rows="5"></textarea>
        </label>
        <p class="mini">固定参数：client_id=app_EMoamEEZ73f0CkXaXp7hrann，redirect_uri=http://localhost:1455/auth/callback</p>
      </section>

      <section class="card">
        <h2>2) 粘贴回调 URL 并提取</h2>
        <label>
          完整回调 URL（包含 code 参数）
          <textarea id="callbackUrl" rows="4" placeholder="http://localhost:1455/auth/callback?code=...&state=..."></textarea>
        </label>
        <div class="row">
          <button id="extractBtn">提取 refresh token</button>
          <button id="clearBtn" class="secondary">清空流程</button>
        </div>
      </section>

      <section class="card">
        <h2>结果</h2>
        <label>
          Client ID
          <input id="resultClientId" readonly />
        </label>
        <label>
          Refresh Token
          <textarea id="refreshToken" rows="4" readonly></textarea>
        </label>
        <label>
          Access Token（可选）
          <textarea id="accessToken" rows="3" readonly></textarea>
        </label>
        <pre id="status"></pre>
      </section>
    </main>

    <script src="/app.js"></script>
  </body>
</html>
