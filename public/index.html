<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OpenAI Refresh Token 提取工具</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <main class="container">
      <h1>OpenAI Refresh Token 提取工具</h1>
      <p class="hint">
        点击“获取授权链接并跳转”后会进入 OpenAI 授权页面。<br />
        授权成功后将自动回跳到本站 <code>/auth/callback</code> 并自动提取 <code>code</code> 后兑换 token。
      </p>

      <section class="card">
        <h2>1) 配置授权参数</h2>
        <label>
          Client ID
          <input id="clientId" value="app_EMoamEEZ73f0CkXaXp7hrann" />
        </label>
        <label>
          Redirect URI
          <input id="redirectUri" placeholder="将自动填充为当前站点 /auth/callback" />
        </label>
        <button id="authorizeBtn">获取授权链接并跳转</button>
        <details>
          <summary>如果无法自动跳转，点击查看授权链接</summary>
          <textarea id="authUrl" readonly rows="4"></textarea>
        </details>
      </section>

      <section class="card">
        <h2>2) 回调与兑换</h2>
        <label>
          回调 URL（自动回跳后会自动填充）
          <textarea id="callbackUrl" rows="4" placeholder="https://your-domain/auth/callback?code=...&state=..."></textarea>
        </label>
        <div class="row">
          <button id="extractBtn">提取并兑换 Token</button>
          <button id="clearBtn" class="secondary">清空流程</button>
        </div>
      </section>

      <section class="card">
        <h2>结果</h2>
        <label>
          Refresh Token
          <textarea id="refreshToken" rows="4" readonly></textarea>
        </label>
        <label>
          Access Token（可选）
          <textarea id="accessToken" rows="3" readonly></textarea>
        </label>
        <pre id="status"></pre>
      </section>
    </main>

    <script src="/app.js"></script>
  </body>
</html>
